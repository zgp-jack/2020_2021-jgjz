(wx.webpackJsonp=wx.webpackJsonp||[]).push([[36],{"125":function(e,t,n){e.exports=n.p+"pages/download/index.wxml"},"210":function(e,t,n){"use strict";n.r(t);n(211);var o=n(71);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r)},"211":function(e,t,n){"use strict";n(125)},"212":function(e,t,n){},"24":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var o,r,_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(o=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=n(0),u=function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}(i),c=n(6),s=n(4);function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(212);var l=(r=o=function(e){function Download(){var e,t,n;_classCallCheck(this,Download);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=n=_possibleConstructorReturn(this,(e=Download.__proto__||Object.getPrototypeOf(Download)).call.apply(e,[this].concat(r))),n.config={"navigationBarTitleText":"下载"},n.$usedState=["IMGCDNURL","name"],n.customComponents=[],_possibleConstructorReturn(n,t)}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Download,e),a(Download,[{"key":"_constructor","value":function _constructor(e){(function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0})(Download.prototype.__proto__||Object.getPrototypeOf(Download.prototype),"_constructor",this).call(this,e),this.$$refs=new u.default.RefsArray}},{"key":"_createData","value":function _createData(){this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{};this.$prefix;var e=(0,i.useState)(""),t=_slicedToArray(e,2),n=t[0],o=t[1];(0,i.useEffect)((function(){var e=u.default.getStorageSync(s.MidData).nickname||"未命名";o(e)}),[]);var r=function handleLook(e){var t=u.default.getStorageSync(s.Type),n=u.default.getStorageSync(s.UserInfo);u.default.downloadFile({"url":c.REQUESTURL+"bk-bookkeeping/share-excel/?identity="+t,"header":{"content-type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=GBK","mid":n.userId,"token":n.token,"time":n.tokenTime,"uuid":n.uuid,"identity":t},"success":function success(e){console.log(e,"resssss"),u.default.saveFile({"tempFilePath":e.tempFilePath,"success":function success(e){var t=e.savedFilePath;console.log(t,"savedFilePath"),u.default.openDocument({"filePath":t,"fileType":"xlsx","success":function success(e){console.log("打开文档成功"),u.default.navigateTo({"url":"/pages/url/index?url="+t})},"fail":function fail(e){console.log(e)},"complete":function complete(e){console.log(e)}})}})},"fail":function fail(e){console.log("文件下载失败")},"complete":function complete(e){}})},a=function handleDownLoad(){u.default.showLoading({"title":"数据加载中..."});var e=u.default.getStorageSync(s.UserInfo),t=u.default.getStorageSync(s.Type);u.default.downloadFile({"url":c.REQUESTURL+"bk-bookkeeping/share-excel/?identity="+t,"header":{"content-type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=GBK","mid":e.userId,"token":e.token,"time":e.tokenTime,"uuid":e.uuid,"identity":t},"success":function success(e){u.default.hideLoading(),console.log(e,"resss"),u.default.saveFile({"tempFilePath":e.tempFilePath,"success":function success(e){console.log("result",e)}})},"fail":function fail(e){u.default.hideLoading(),console.log("文件下载失败")},"complete":function complete(e){u.default.hideLoading()}})};return this.anonymousFunc0=r,this.anonymousFunc1=a,Object.assign(this.__state,{"IMGCDNURL":c.IMGCDNURL,"name":n}),this.__state}},{"key":"anonymousFunc0","value":function anonymousFunc0(e){}},{"key":"anonymousFunc1","value":function anonymousFunc1(e){}}]),Download}(u.default.Component),o.$$events=["anonymousFunc0","anonymousFunc1"],o.$$componentPath="pages/download/index",r);l.config={"navigationBarTitleText":"下载"},t.default=l,Component(n(0).default.createComponent(l,!0))},"71":function(e,t,n){"use strict";n.r(t);var o=n(24),r=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t.default=r.a}},[[210,0,1,2,3]]]);