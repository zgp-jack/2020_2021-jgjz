(wx.webpackJsonp=wx.webpackJsonp||[]).push([[47],{"135":function(t,e,r){t.exports=r.p+"pages/share/index.wxml"},"232":function(t,e,r){"use strict";r.r(e);r(233);var o=r(77);for(var n in o)"default"!==n&&function(t){r.d(e,t,(function(){return o[t]}))}(n)},"233":function(t,e,r){"use strict";r(135)},"234":function(t,e,r){},"30":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{"value":!0});var o,n,_slicedToArray=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,e){var r=[],o=!0,n=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(o=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);o=!0);}catch(t){n=!0,a=t}finally{try{!o&&u.return&&u.return()}finally{if(n)throw a}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,r){return e&&defineProperties(t.prototype,e),r&&defineProperties(t,r),t}}(),i=r(0),u=function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}(i),l=r(2);function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}r(234);var s=(n=o=function(t){function Share(){var t,e,r;_classCallCheck(this,Share);for(var o=arguments.length,n=Array(o),a=0;a<o;a++)n[a]=arguments[a];return e=r=_possibleConstructorReturn(this,(t=Share.__proto__||Object.getPrototypeOf(Share)).call.apply(t,[this].concat(n))),r.config={"navigationBarTitleText":"考勤表"},r.$usedState=["fixedTab","tebArr"],r.customComponents=[],_possibleConstructorReturn(r,e)}return function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{"constructor":{"value":t,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Share,t),a(Share,[{"key":"_constructor","value":function _constructor(t){(function get(t,e,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var n=Object.getPrototypeOf(t);return null===n?void 0:get(n,e,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0})(Share.prototype.__proto__||Object.getPrototypeOf(Share.prototype),"_constructor",this).call(this,t),this.$$refs=new u.default.RefsArray}},{"key":"_createData","value":function _createData(){this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{};this.$prefix;var t=(0,i.useState)(""),e=_slicedToArray(t,2),r=(e[0],e[1]),o=(0,i.useState)(),n=_slicedToArray(o,2),a=(n[0],n[1]),u=(0,i.useState)(""),s=_slicedToArray(u,2),f=(s[0],s[1]),h=(0,i.useState)([]),c=_slicedToArray(h,2),p=c[0],m=c[1],v=(0,i.useState)([]),g=_slicedToArray(v,2),y=g[0],_=g[1],w=(0,i.useState)([{},{},{}]),b=_slicedToArray(w,2),d=(b[0],b[1],(0,i.useState)(!1)),k=_slicedToArray(d,2),S=(k[0],k[1],function addZero(t){return parseInt(t)<10&&(t="0"+t),t});(0,i.useEffect)((function(){var t=new Date,e=t.getFullYear()+"-"+S(t.getMonth()+1),o=t.getFullYear(),n=S(t.getMonth()+1);a(o),f(n),r(e),O(e)}),[]);var O=function getList(t){var e={"date":t},r=new Date(t),o=r.getMonth();r.setMonth(o+1),r.setDate(0);for(var n=r.getDate(),a=[],i=1;i<=n;i++){var u={"id":i,"name":i,"default":!0};a.push(u)}var s={"list":[{"id":"00","name":"本月统计","default":!0}].concat(a)},f=JSON.parse(JSON.stringify(y));f.push(s);var h=JSON.parse(JSON.stringify(p)),c={"list":[{"id":1,"name":"工人","default":!0},{"id":2,"name":"记工类型","default":!0}]};h.push(c),(0,l.bkgetExcelDataAction)(e).then((function(t){var e=t.data,r=[],o=[];if(e.length>0)for(var n=0;n<e.length;n++){var i={},u={"name":0,"type":{}};u.type.amount="",u.type.hour={"work_time":"","over_time":""},u.type.work={"work_time":"","over_time":""},u.type.borrow="";var l=[],s={"name":e[n].name},c={},p=void 0;e[n].hour.length&&(p=!0);var v=void 0;e[n].work.length&&(v=!0);var g=void 0;e[n].amount.length&&(g=!0);var y=void 0;e[n].borrow.length&&(y=!0);var w={"hour":p,"work":v,"amount":g,"borrow":y};c.type=w,l.push(s,c),i.list=l,r.push(i);for(var b=[],d=JSON.parse(JSON.stringify(a)),k=0;k<d.length;k++){if(d[k].type={},e[n].hour.length>0){for(var S=[],O=0;O<e[n].hour.length;O++)if(S.push(e[n].hour[O].total),e[n].hour[O].date_num==d[k].name&&e[n].hour[O].list&&e[n].hour[O].list.length>0)if(1==e[n].hour[O].list.length){var C={"work_time":e[n].hour[O].list[0].work_time,"overtime":e[n].hour[O].list[0].overtime};d[k].type.hour=C}else if(e[n].hour[O].list.length>1){var A={"num":e[n].hour[O].list.length+"笔"};d[k].type.hour=A}var x=0,j=0;if(S.length>0)for(var P=0;P<S.length;P++)S[P].work_time&&(x+=+S[P].work_time),S[P].over_time&&(j+=+S[P].over_time);u.type.hour.work_time=x,u.type.hour.over_time=j}if(e[n].work.length>0){for(var D=[],T=0;T<e[n].work.length;T++)if(D.push(e[n].work[T].total),e[n].work[T].date_num==d[k].name&&e[n].work[T].list&&e[n].work[T].list.length>0)if(1==e[n].work[T].list.length){var J={"work_time":e[n].work[T].list[0].work_time,"overtime":e[n].work[T].list[0].overtime};d[k].type.work=J}else if(e[n].work[T].list.length>1){var $={"num":e[n].work[T].list.length};d[k].type.work=$}var E=0,M=0;if(D.length>0)for(var N=0;N<D.length;N++)D[N].work_time&&(E+=+D[N].work_time),D[N].over_time&&(M+=+D[N].over_time);u.type.work.work_time=E,u.type.work.over_time=M}if(e[n].amount.length>0){for(var R=[],F=0;F<e[n].amount.length;F++)if(e[n].amount[F].date_num==d[k].name){if(e[n].amount[F].total.length>0)for(var I=0;I<e[n].amount[F].total.length;I++)R.push(e[n].amount[F].total[I]);if(e[n].amount[F].list&&e[n].amount[F].list.length>0)if(1==e[n].amount[F].list.length){var B={"unit_num":e[n].work[F].list[0].unit_num,"unit":e[n].work[F].list[0].unit};d[k].type.amount=B}else if(e[n].amount[F].list.length>1){var Y={"num":e[n].amount[F].list.length+"笔"};d[k].type.amount=Y}}R.length>0&&function(){var t={};R.forEach((function(e){t[e.unit_name]?t[e.unit_name]+=+e.sum:t[e.unit_name]=+e.sum})),u.type.amount=[t]}()}if(e[n].borrow.length>0){for(var q=[],L=0;L<e[n].borrow.length;L++)if(q.push(e[n].borrow[L].total),e[n].borrow[L].date_num==d[k].name&&e[n].borrow[L].list&&e[n].borrow[L].list.length>0)if(1==e[n].borrow[L].list.length){var Z={"money":e[n].borrow[L].list[0].money};d[k].type.borrow=Z}else if(e[n].borrow[L].list.length>1){var z={"num":e[n].borrow[L].list.length+"笔"};d[k].type.borrow=z}var G=0;if(q.length>0)for(var H=0;H<q.length;H++)q[H].money&&(G+=+q[H].money);u.type.borrow=G}}var K=[u].concat(_toConsumableArray(d));b.push(K);var Q={"list":b[0]};o.push(Q)}m([].concat(_toConsumableArray(h),r)),_([].concat(_toConsumableArray(f),o))}))};return Object.assign(this.__state,{"fixedTab":p,"tebArr":y}),this.__state}}]),Share}(u.default.Component),o.$$events=[],o.$$componentPath="pages/share/index",n);s.config={"navigationBarTitleText":"考勤表"},e.default=s,Component(r(0).default.createComponent(s,!0))},"77":function(t,e,r){"use strict";r.r(e);var o=r(30),n=r.n(o);for(var a in o)"default"!==a&&function(t){r.d(e,t,(function(){return o[t]}))}(a);e.default=n.a}},[[232,0,1,2,3]]]);