(wx.webpackJsonp=wx.webpackJsonp||[]).push([[33],{"122":function(e,t,n){e.exports=n.p+"pages/addNotepad/index.wxml"},"200":function(e,t,n){"use strict";n.r(t);n(201);var r=n(68);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o)},"201":function(e,t,n){"use strict";n(122)},"202":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function userCode(e){(0,o.useRouter)().params.id;var t=(0,u.useSelector)((function(e){return e})),n=(0,o.useState)({"note":"","image":[],"time":"","id":"","week":""}),s=_slicedToArray(n,2),c=s[0],f=s[1],d=(0,o.useState)({"item":[]}),p=_slicedToArray(d,2),m=p[0],y=p[1];(0,o.useEffect)((function(){if(e.id){if(console.log(t,"useSelectorItem"),t.notepad.data){var n=void 0;t.notepad.data.map((function(t){console.log(t),t.list.length>0&&t.list&&t.list.map((function(t){console.log(t,"val"),t.id===e.id&&(n=t)}))})),console.log(n,"obj");var o={"note":n.note,"time":n.creatTime,"image":n.view_images,"id":e.id};y({"item":n.view_images}),f(o)}}else{var a=(new Date).getDay(),i=new Date,u=new Array("星期日","星期一","星期二","星期三","星期四","星期五","星期六")[a],l=i.getFullYear()+"-"+v(i.getMonth()+1)+"-"+v(i.getDate())+"    "+v(i.getHours())+":"+v(i.getMinutes()),s=JSON.parse(JSON.stringify(c));f(r({},s,{"time":l,"week":u}))}}),[]);var v=function addZero(e){return parseInt(e)<10&&(e="0"+e),e};return{"model":c,"setModel":f,"handleSubmit":function handleSubmit(){var t=JSON.parse(JSON.stringify(c));console.log(t);var n=m.item.map((function(e){return e.url}));if(n||t.note){var r={"note":t.note,"img":n,"id":t.id};console.log(r,"params"),e.id?(0,i.bkUpdateNotePadAction)(r).then((function(e){console.log(e),(0,l.default)("修改成功"),setTimeout((function(){a.default.navigateBack({"delta":2})}),500)})):(0,i.bkAddNotepadAction)(r).then((function(e){200===e.code?((0,l.default)(e.msg),setTimeout((function(){a.default.navigateBack({"delta":1})}),500)):(0,l.default)(e.msg)}))}else(0,l.default)("请选择图片或填写记事")},"image":m,"setImage":y}};var o=n(0),a=_interopRequireDefault(o),i=n(2),u=n(8),l=_interopRequireDefault(n(3));function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}},"203":function(e,t,n){},"21":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),u=n(0),l=_interopRequireDefault(u),s=_interopRequireDefault(n(13)),c=_interopRequireDefault(n(202));_interopRequireDefault(n(3));function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(203);var f=(o=r=function(e){function AddNotepad(){var e,t,n;_classCallCheck(this,AddNotepad);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n=_possibleConstructorReturn(this,(e=AddNotepad.__proto__||Object.getPrototypeOf(AddNotepad)).call.apply(e,[this].concat(o))),n.config={"navigationBarTitleText":"记事本"},n.$usedState=["$compid__45","id","model"],n.customComponents=["ImageView"],_possibleConstructorReturn(n,t)}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AddNotepad,e),i(AddNotepad,[{"key":"_constructor","value":function _constructor(e){(function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0})(AddNotepad.prototype.__proto__||Object.getPrototypeOf(AddNotepad.prototype),"_constructor",this).call(this,e),this.$$refs=new l.default.RefsArray}},{"key":"_createData","value":function _createData(){this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{};var e=this.$prefix,t=(0,u.genCompid)(e+"$compid__45"),n=_slicedToArray(t,2),r=n[0],o=n[1],i=(0,u.useRouter)(),l=i.params.id,f={"id":l},d=(0,c.default)(f),p=d.model,m=d.setModel,y=d.handleSubmit,v=d.image,g=d.setImage,h=function handleContent(e){var t=JSON.parse(JSON.stringify(p));console.log(t,"modelInfo"),t.note=e.detail.value,m(t)},_=function userUploadImg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;(0,s.default)().then((function(t){var n={"url":t.url,"httpurl":t.httpurl};-1===e?g(a({},v,{"item":[].concat(_toConsumableArray(v.item),[n])})):(v.item[e]=n,g(a({},v)))}))},b=function userDelImg(e){if(v.item){var t=JSON.parse(JSON.stringify(v.item));t.splice(e,1),g({"item":t})}};return this.anonymousFunc0=function(e){return h(e)},this.anonymousFunc1=y,u.propsManager.set({"images":v.item,"max":4,"userUploadImg":_,"userDelImg":b},o,r),Object.assign(this.__state,{"$compid__45":o,"id":l,"model":p}),this.__state}},{"key":"anonymousFunc0","value":function anonymousFunc0(e){}},{"key":"anonymousFunc1","value":function anonymousFunc1(e){}}]),AddNotepad}(l.default.Component),r.$$events=["anonymousFunc0","anonymousFunc1"],r.$$componentPath="pages/addNotepad/index",o);f.config={"navigationBarTitleText":"记事本"},t.default=f,Component(n(0).default.createComponent(f,!0))},"68":function(e,t,n){"use strict";n.r(t);var r=n(21),o=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t.default=o.a}},[[200,0,1,2,3]]]);