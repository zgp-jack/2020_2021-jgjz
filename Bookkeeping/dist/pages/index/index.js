(wx.webpackJsonp=wx.webpackJsonp||[]).push([[41],{"117":function(n,e,t){n.exports=t.p+"pages/index/index.wxml"},"17":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{"value":!0});var o,a,_slicedToArray=function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function sliceIterator(n,e){var t=[],o=!0,a=!1,u=void 0;try{for(var r,s=n[Symbol.iterator]();!(o=(r=s.next()).done)&&(t.push(r.value),!e||t.length!==e);o=!0);}catch(n){a=!0,u=n}finally{try{!o&&s.return&&s.return()}finally{if(a)throw u}}return t}(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=function(){function defineProperties(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(n,e,t){return e&&defineProperties(n.prototype,e),t&&defineProperties(n,t),n}}(),r=t(0),s=_interopRequireDefault(r),i=t(2),c=t(8),l=t(4),d=t(188),y=t(6),f=t(64),m=_interopRequireDefault(t(3)),p=t(118);function _interopRequireDefault(n){return n&&n.__esModule?n:{"default":n}}function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?n:e}t(189);var g=[{"url":y.IMGCDNURL+"noviceGuidance1.png","id":1},{"url":y.IMGCDNURL+"noviceGuidance2.png","id":2},{"url":y.IMGCDNURL+"noviceGuidance3.png","id":3},{"url":y.IMGCDNURL+"noviceGuidance4.png","id":4},{"url":y.IMGCDNURL+"noviceGuidance5.png","id":5}],h=(a=o=function(n){function Index(){var n,e,t;_classCallCheck(this,Index);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return e=t=_possibleConstructorReturn(this,(n=Index.__proto__||Object.getPrototypeOf(Index)).call.apply(n,[this].concat(a))),t.$usedState=["anonymousState__temp5","anonymousState__temp6","loopArray54","loopArray55","$compid__57","$compid__58","$compid__59","$compid__60","$compid__61","$compid__62","image","closeImage","IMGCDNURL","start","end","vals","newMonth","type","prompt","item","show","busy","list","month","newTime","week"],t.anonymousFunc13Map={},t.anonymousFunc15Map={},t.customComponents=["AtBadge","AtModal","Auth","CreateProject","ProjectModal"],_possibleConstructorReturn(t,e)}return function _inherits(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{"constructor":{"value":n,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(Index,n),u(Index,[{"key":"_constructor","value":function _constructor(n){(function get(n,e,t){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,e);if(void 0===o){var a=Object.getPrototypeOf(n);return null===a?void 0:get(a,e,t)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(t):void 0})(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"_constructor",this).call(this,n),this.$$refs=new s.default.RefsArray}},{"key":"_createData","value":function _createData(){var n=this;this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{};var e=this.$prefix,t=(0,r.genCompid)(e+"$compid__57"),o=_slicedToArray(t,2),a=o[0],u=o[1],h=(0,r.genCompid)(e+"$compid__58"),_=_slicedToArray(h,2),v=_[0],F=_[1],S=(0,r.genCompid)(e+"$compid__59"),b=_slicedToArray(S,2),k=b[0],x=b[1],I=(0,r.genCompid)(e+"$compid__60"),w=_slicedToArray(I,2),M=w[0],C=w[1],D=(0,r.genCompid)(e+"$compid__61"),T=_slicedToArray(D,2),$=T[0],P=T[1],A=(0,r.genCompid)(e+"$compid__62"),O=_slicedToArray(A,2),j=O[0],N=O[1],R=(0,c.useDispatch)(),G=(0,r.useState)({"groupName":"","teamName":""}),U=_slicedToArray(G,2),E=U[0],L=U[1],J=(0,r.useState)(!1),B=_slicedToArray(J,2),Y=B[0],z=B[1],W=(0,r.useState)(""),q=_slicedToArray(W,2),K=q[0],V=q[1],Z=(0,r.useState)(""),H=_slicedToArray(Z,2),Q=(H[0],H[1]),X=(0,r.useState)(""),nn=_slicedToArray(X,2),en=nn[0],tn=nn[1],on=(0,r.useState)(""),an=_slicedToArray(on,2),un=an[0],rn=an[1],sn=(0,r.useState)(""),cn=_slicedToArray(sn,2),ln=cn[0],dn=cn[1],yn=(0,r.useState)(""),fn=_slicedToArray(yn,2),mn=fn[0],pn=fn[1],gn=(0,r.useState)(""),hn=_slicedToArray(gn,2),_n=hn[0],vn=hn[1],Fn=(0,r.useState)([0,0]),Sn=_slicedToArray(Fn,2),bn=(Sn[0],Sn[1],(0,r.useState)([])),kn=_slicedToArray(bn,2),xn=(kn[0],kn[1],(0,r.useState)(0)),In=_slicedToArray(xn,2),wn=In[0],Mn=In[1],Cn=(0,r.useState)(0),Dn=_slicedToArray(Cn,2),Tn=(Dn[0],Dn[1],(0,r.useState)([{},{},{}])),$n=_slicedToArray(Tn,2),Pn=($n[0],$n[1],(0,r.useState)(!1)),An=_slicedToArray(Pn,2),On=An[0],jn=An[1],Nn=(0,r.useState)(!1),Rn=_slicedToArray(Nn,2),Gn=Rn[0],Un=(Rn[1],(0,r.useState)(!1)),En=_slicedToArray(Un,2),Ln=En[0],Jn=En[1],Bn=(0,r.useState)([]),Yn=_slicedToArray(Bn,2),zn=Yn[0],Wn=Yn[1],qn=(0,r.useState)("0"),Kn=_slicedToArray(qn,2),Vn=Kn[0],Zn=Kn[1],Hn=(0,r.useState)(),Qn=_slicedToArray(Hn,2),Xn=Qn[0],ne=Qn[1],ee=(0,r.useState)(),te=_slicedToArray(ee,2),oe=te[0],ae=te[1],ue=(0,r.useState)(g[0].url),re=_slicedToArray(ue,2),se=re[0],ie=re[1],ce=(0,r.useState)(!1),le=_slicedToArray(ce,2),de=le[0],ye=le[1],fe=(0,r.useState)(!1),me=_slicedToArray(fe,2),pe=me[0],ge=me[1],he=(0,r.useState)(!1),_e=_slicedToArray(he,2),ve=_e[0],Fe=_e[1],Se=(0,r.useState)(!0),be=_slicedToArray(Se,2),ke=be[0],xe=be[1],Ie=(0,r.useState)(!1),we=_slicedToArray(Ie,2),Me=we[0],Ce=we[1],De=(0,r.useState)(!1),Te=_slicedToArray(De,2),$e=Te[0],Pe=Te[1],Ae=(0,r.useState)(""),Oe=_slicedToArray(Ae,2),je=Oe[0],Ne=Oe[1],Re=(0,r.useState)(!1),Ge=_slicedToArray(Re,2),Ue=Ge[0],Ee=Ge[1],Le=function getDates(){var n=(new Date).getDay(),e=new Date,t=new Array("星期日","星期一","星期二","星期三","星期四","星期五","星期六")[n],o=e.getFullYear()+"-"+Je(e.getMonth()+1)+"-"+Je(e.getDate()),a=e.getFullYear()+"-"+Je(e.getMonth()+1);return ne(o),tn(a),rn(Je(e.getMonth()+1)),dn(o),pn(a),vn(t),a},Je=function addZero(n){return parseInt(n)<10&&(n="0"+n),n};(0,r.onAppShow)((function(n){if(console.log(n,"2312312"),1037===n.scene&&n.referrerInfo.extraData.userId&&n.referrerInfo.extraData.token&&n.referrerInfo.extraData.tokenTime){var e={"userId":n.referrerInfo.extraData.userId,"token":n.referrerInfo.extraData.token,"tokenTime":n.referrerInfo.extraData.tokenTime};console.log(312312312,"112"),(0,i.appletJumpAction)(e).then((function(n){if(console.log(n,"跳转返回结果"),200==n.code);else if(40001==n.code);else if(4e4==n.code){s.default.setStorageSync(l.UserInfo,n.data);var e={"mid":n.data.id};(0,i.bkMemberAuthAction)(e).then((function(n){if(console.log(n),200!==n.code)(0,m.default)(n.msg);else{var e=s.default.getStorageSync(l.MidData);e.worker_id=n.data.worker_id,s.default.setStorageSync(l.MidData,e)}}))}else n.code}))}})),(0,r.useDidShow)((function(){var n=s.default.getStorageSync(l.MidData),e=s.default.getStorageSync(l.CreationTime);s.default.getStorageSync(l.NeverPrompt)&&Ee(!0),n&&z(!1);var t=(new Date).getTime()/1e3;console.log(t,e,"xxx"),e&&e+604800>t&&Pe(!0),R((0,p.setClickTIme)([])),R((0,f.setWorker)([]));var o=s.default.getStorageSync(l.Type);o&&Mn(o);s.default.getStorageSync(l.UserInfo);R((0,d.setTypes)(o)),Ye()}));var Be=function bkGetProjectTeam(){(0,i.bkGetProjectTeamAction)({}).then((function(n){0===n.data.length&&ge(!0)}))},Ye=function getData(n){var e=s.default.getStorageSync(l.MidData);if(e){var t=s.default.getStorageSync(l.Type);if(!t)return void Jn(!0);Mn(t),0===t&&Jn(!0)}var o=void 0;console.log(de,"resdsada"),n?o=n:(console.log(1),console.log(312312312312),o=Le()),console.log(o,"changeTimechangeTime");var a={"time":o,"identity":wn};e&&(0,i.bkIndexAction)(a).then((function(n){if(200===n.code){ae(n.data),Zn(n.data.count_is_new),0==parseInt(n.data.count_is_new)?Ce(!0):Ce(!1),dn(n.data.earliest_month);var e=new Date,t=e.getFullYear()+"-"+Je(e.getMonth()+1);pn(t),Array.isArray(n.data.business_list.data)?n.data.business_list.data?Wn(n.data.business_list.data):Wn([]):n.data.business_list.data.constructor===Object&&(n.data.business_list.data.data[0].arr?Wn(n.data.business_list.data.data[0].arr):Wn([])),console.log(3123123),Ne(n.data.lasted_business_identity);s.default.getStorageSync(l.Type)}else(0,m.default)(n.msg)}))},ze=function handleChangeTime(n){s.default.getStorageSync(l.MidData)?(console.log(n,"xxx"),V(n.detail.value),Q(n.detail.value),ye(!0),Ye(n.detail.value),console.log(n.detail.value.substring(n.detail.value.length-2),"e.detail.value.substring(e.detail.value.length - 2)"),rn(n.detail.value.substring(n.detail.value.length-2))):z(!0)},We=function handelTps(){var n={"identity":wn};(0,i.bkUpdateBusinessNewAction)(n).then((function(n){200===n.code?((0,m.default)("您完成了[ "+n.data+" ]条记工信息的备份，数据安全不丢失~"),Ce(!0)):(0,m.default)("放心使用，免费记工，数据永远不会丢失哟")}))},qe=function handelChange(n,e){if(s.default.getStorageSync(l.MidData)){var t=2===n?"开始为自己记工吧":"开始为工人记工吧";Mn(n),s.default.setStorageSync(l.Type,n),e||((0,m.default)(t),setTimeout((function(){Ye()}),1e3))}else z(!0)},Ke=function getNextPageData(){Ve("/pages/flowingWater/index")},Ve=function userRouteJump(n){s.default.navigateTo({"url":n})},Ze=function handleType(n){var e=void 0;if(e=1===wn?2:1,1===n){console.log(wn,"typenjdskajdkjab");var t=1===e?"开始为自己记工吧":"开始为工人记工吧";2==e&&Be(),(0,m.default)(t),console.log(e,"neverPromptneverPrompt"),Mn(e),s.default.setStorageSync(l.Type,e)}else 2===n&&(s.default.setStorageSync(l.NeverPrompt,!0),Ee(!0));Ve("/pages/recorder/index?type="+e),jn(!1)},He=function handleGoback(){s.default.navigateToMiniProgram({"appId":"wx456feacb0e86162f","path":"/pages/index/index","extraData":{"foo":"bar"},"envVersion":"trial","success":function success(n){}})},Qe=function hanleImage(n){var e=void 0;if(n!==g[g.length-1].url)for(var t=0;t<g.length;t++)n===g[t].url&&(e=g[t+1].url);else xe(!0),Ye();ie(e)},Xe=function handleClose(n){z(n)},nt=function handleCallback(){xe(!1),z(!1)},et=function handleChangeRole(n){Mn(n),Jn(!1),s.default.setStorageSync(l.Type,n),Ye()},tt=function handleCreateProjectClose(){ge(!1)},ot=function handleInput(n,e){var t=JSON.parse(JSON.stringify(E));t[n]=e.detail.value,L(t)},at=function handleAddProject(){var n={"group_name":E.groupName,"team_name":E.teamName};(0,i.bkAddProjectTeamAction)(n).then((function(n){200===n.code?Fe(!1):(0,m.default)(n.msg)}))},ut=function handleBack(){Fe(!1),ge(!0)},rt=function handleJump(n,e){if(s.default.getStorageSync(l.MidData)){if(e){if(0!==parseInt(je)&&wn!=parseInt(je)&&!Ue)return console.log(wn,"type"),console.log(je,"lasted_business_identity"),void jn(!0);qe(wn,!0)}Ve(n)}else z(!0)};console.log(oe,"item"),this.anonymousFunc0=function(){Qe(se)},this.anonymousFunc1=function(n){return ze(n)},this.anonymousFunc2=function(){qe(2)},this.anonymousFunc3=function(){qe(1)},this.anonymousFunc4=We,this.anonymousFunc5=function(){return rt("/pages/flowingWater/index")},this.anonymousFunc6=function(){return rt("/pages/flowingWater/index")},this.anonymousFunc7=function(){return rt("/pages/attendanceSheet/index")},this.anonymousFunc8=function(){return rt("/pages/recorder/index?type="+wn+"&stateType=1",!0)},this.anonymousFunc9=function(){return rt("/pages/recorder/index?type="+wn+"&stateType=1",!0)},this.anonymousFunc10=function(){return rt("/pages/recorder/index?type="+wn)},this.anonymousFunc11=function(){return rt("/pages/notepad/index")},this.anonymousFunc12=function(){Ke()},this.anonymousFunc14=function(){return Ke()},this.anonymousFunc16=function(){return Ve("/pages/feedback/index")},this.anonymousFunc17=He,this.anonymousFunc18=function(){return Ze(0)},this.anonymousFunc19=function(){return Ze(1)},this.anonymousFunc20=function(){return Ze(2)},this.anonymousFunc21=function(){return et(1)},this.anonymousFunc22=function(){return et(2)};var st=function anonymousState__temp5(){ge(!1),Fe(!0)},it=function anonymousState__temp6(){return Fe(!1)},ct=1===wn&&zn.length>0&&!Gn?zn.map((function(e,t){e={"$original":(0,r.internal_get_original)(e)};var o=1===wn&&zn.length>0&&!Gn?t+t:null,a="bbizz"+t;return n.anonymousFunc13Map[a]=Ke,{"$loopState__temp2":o,"_$indexKey":a,"$original":e.$original}})):[],lt=2===wn&&zn.length>0&&!Gn?zn.map((function(e,t){e={"$original":(0,r.internal_get_original)(e)};var o=2===wn&&zn.length>0&&!Gn?t+t:null,a="bbjzz"+t;return n.anonymousFunc15Map[a]=Ke,{"$loopState__temp4":o,"_$indexKey2":a,"$original":e.$original}})):[];return oe&&!Me&&r.propsManager.set({"value":Vn,"maxValue":99,"className":"AtBadge"},u,a),r.propsManager.set({"isOpened":On,"closeOnClickOverlay":!1},F,v),r.propsManager.set({"isOpened":Ln,"closeOnClickOverlay":!1},x,k),r.propsManager.set({"display":Y,"handleClose":Xe,"callback":nt},C,M),r.propsManager.set({"display":pe,"handleClose":tt,"val":E&&E.groupName,"handleSubmit":st,"handleInput":ot},P,$),r.propsManager.set({"display":ve,"handleSubmit":at,"handleInput":ot,"teamName":E&&E.teamName,"handleBack":ut,"handleClose":it},N,j),Object.assign(this.__state,{"anonymousState__temp5":st,"anonymousState__temp6":it,"loopArray54":ct,"loopArray55":lt,"$compid__57":u,"$compid__58":F,"$compid__59":x,"$compid__60":C,"$compid__61":P,"$compid__62":N,"image":se,"closeImage":ke,"IMGCDNURL":y.IMGCDNURL,"start":ln,"end":mn,"vals":K,"newMonth":en,"type":wn,"prompt":$e,"item":oe,"show":Me,"busy":Gn,"list":zn,"month":un,"newTime":Xn,"week":_n}),this.__state}},{"key":"anonymousFunc0","value":function anonymousFunc0(n){}},{"key":"anonymousFunc1","value":function anonymousFunc1(n){}},{"key":"anonymousFunc2","value":function anonymousFunc2(n){}},{"key":"anonymousFunc3","value":function anonymousFunc3(n){}},{"key":"anonymousFunc4","value":function anonymousFunc4(n){}},{"key":"anonymousFunc5","value":function anonymousFunc5(n){}},{"key":"anonymousFunc6","value":function anonymousFunc6(n){}},{"key":"anonymousFunc7","value":function anonymousFunc7(n){}},{"key":"anonymousFunc8","value":function anonymousFunc8(n){}},{"key":"anonymousFunc9","value":function anonymousFunc9(n){}},{"key":"anonymousFunc10","value":function anonymousFunc10(n){}},{"key":"anonymousFunc11","value":function anonymousFunc11(n){}},{"key":"anonymousFunc12","value":function anonymousFunc12(n){}},{"key":"anonymousFunc13","value":function anonymousFunc13(n){for(var e,t=arguments.length,o=Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];return this.anonymousFunc13Map[n]&&(e=this.anonymousFunc13Map)[n].apply(e,o)}},{"key":"anonymousFunc14","value":function anonymousFunc14(n){}},{"key":"anonymousFunc15","value":function anonymousFunc15(n){for(var e,t=arguments.length,o=Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];return this.anonymousFunc15Map[n]&&(e=this.anonymousFunc15Map)[n].apply(e,o)}},{"key":"anonymousFunc16","value":function anonymousFunc16(n){}},{"key":"anonymousFunc17","value":function anonymousFunc17(n){}},{"key":"anonymousFunc18","value":function anonymousFunc18(n){}},{"key":"anonymousFunc19","value":function anonymousFunc19(n){}},{"key":"anonymousFunc20","value":function anonymousFunc20(n){}},{"key":"anonymousFunc21","value":function anonymousFunc21(n){}},{"key":"anonymousFunc22","value":function anonymousFunc22(n){}}]),Index}(s.default.Component),o.$$events=["anonymousFunc0","anonymousFunc1","anonymousFunc2","anonymousFunc3","anonymousFunc4","anonymousFunc5","anonymousFunc6","anonymousFunc7","anonymousFunc8","anonymousFunc9","anonymousFunc10","anonymousFunc11","anonymousFunc12","anonymousFunc13","anonymousFunc14","anonymousFunc15","anonymousFunc16","anonymousFunc17","anonymousFunc18","anonymousFunc19","anonymousFunc20","anonymousFunc21","anonymousFunc22"],o.$$componentPath="pages/index/index",a);e.default=h,Component(t(0).default.createComponent(h,!0))},"185":function(n,e,t){"use strict";t.r(e);t(186);var o=t(63);for(var a in o)"default"!==a&&function(n){t.d(e,n,(function(){return o[n]}))}(a)},"186":function(n,e,t){"use strict";t(117)},"188":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{"value":!0}),e.setTypes=function setTypes(n){return{"type":o.SETTYPE,"data":n}},e.getType=function getType(){return{"type":o.GETTYPE}};var o=t(114)},"189":function(n,e,t){},"63":function(n,e,t){"use strict";t.r(e);var o=t(17),a=t.n(o);for(var u in o)"default"!==u&&function(n){t.d(e,n,(function(){return o[n]}))}(u);e.default=a.a}},[[185,0,1,2,3]]]);