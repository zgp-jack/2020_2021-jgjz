(wx.webpackJsonp=wx.webpackJsonp||[]).push([[41],{"117":function(e,n,t){e.exports=t.p+"pages/index/index.wxml"},"17":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{"value":!0});var o,a,_slicedToArray=function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,n){var t=[],o=!0,a=!1,u=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(t.push(r.value),!n||t.length!==n);o=!0);}catch(e){a=!0,u=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw u}}return t}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=function(){function defineProperties(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,t){return n&&defineProperties(e.prototype,n),t&&defineProperties(e,t),e}}(),r=t(0),s=_interopRequireDefault(r),i=t(2),c=t(8),l=t(4),d=t(188),f=t(6),y=t(64),m=_interopRequireDefault(t(3)),p=t(118);function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}t(189);var g=!1,h=[{"url":f.IMGCDNURL+"noviceGuidance1.png","id":1},{"url":f.IMGCDNURL+"noviceGuidance2.png","id":2},{"url":f.IMGCDNURL+"noviceGuidance3.png","id":3},{"url":f.IMGCDNURL+"noviceGuidance4.png","id":4},{"url":f.IMGCDNURL+"noviceGuidance5.png","id":5}],v=(a=o=function(e){function Index(){var e,n,t;_classCallCheck(this,Index);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return n=t=_possibleConstructorReturn(this,(e=Index.__proto__||Object.getPrototypeOf(Index)).call.apply(e,[this].concat(a))),t.$usedState=["anonymousState__temp5","anonymousState__temp6","loopArray59","loopArray60","$compid__71","$compid__72","$compid__73","$compid__74","$compid__75","$compid__76","image","closeImage","IMGCDNURL","start","end","vals","newMonth","type","prompt","item","show","busy","list","month","newTime","week"],t.anonymousFunc13Map={},t.anonymousFunc15Map={},t.customComponents=["AtBadge","AtModal","Auth","CreateProject","ProjectModal"],_possibleConstructorReturn(t,n)}return function _inherits(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(Index,e),u(Index,[{"key":"_constructor","value":function _constructor(e){(function get(e,n,t){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,n,t)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(t):void 0})(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"_constructor",this).call(this,e),this.$$refs=new s.default.RefsArray}},{"key":"_createData","value":function _createData(){var e=this;this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{};var n=this.$prefix,t=(0,r.genCompid)(n+"$compid__71"),o=_slicedToArray(t,2),a=o[0],u=o[1],v=(0,r.genCompid)(n+"$compid__72"),_=_slicedToArray(v,2),F=_[0],S=_[1],k=(0,r.genCompid)(n+"$compid__73"),b=_slicedToArray(k,2),x=b[0],I=b[1],D=(0,r.genCompid)(n+"$compid__74"),T=_slicedToArray(D,2),M=T[0],w=T[1],C=(0,r.genCompid)(n+"$compid__75"),$=_slicedToArray(C,2),P=$[0],A=$[1],O=(0,r.genCompid)(n+"$compid__76"),j=_slicedToArray(O,2),N=j[0],R=j[1],G=(0,c.useDispatch)(),U=(0,r.useState)({"groupName":"","teamName":""}),E=_slicedToArray(U,2),L=E[0],J=E[1],B=(0,r.useState)(!1),Y=_slicedToArray(B,2),z=Y[0],W=Y[1],q=(0,r.useState)(""),K=_slicedToArray(q,2),V=K[0],Z=K[1],H=(0,r.useState)(""),Q=_slicedToArray(H,2),X=(Q[0],Q[1]),ee=(0,r.useState)(""),ne=_slicedToArray(ee,2),te=ne[0],oe=ne[1],ae=(0,r.useState)(""),ue=_slicedToArray(ae,2),re=ue[0],se=ue[1],ie=(0,r.useState)(""),ce=_slicedToArray(ie,2),le=ce[0],de=ce[1],fe=(0,r.useState)(""),ye=_slicedToArray(fe,2),me=ye[0],pe=ye[1],ge=(0,r.useState)(""),he=_slicedToArray(ge,2),ve=he[0],_e=he[1],Fe=(0,r.useState)([0,0]),Se=_slicedToArray(Fe,2),ke=(Se[0],Se[1],(0,r.useState)([])),be=_slicedToArray(ke,2),xe=(be[0],be[1],(0,r.useState)(0)),Ie=_slicedToArray(xe,2),De=Ie[0],Te=Ie[1],Me=(0,r.useState)(0),we=_slicedToArray(Me,2),Ce=(we[0],we[1],(0,r.useState)([{},{},{}])),$e=_slicedToArray(Ce,2),Pe=($e[0],$e[1],(0,r.useState)(!1)),Ae=_slicedToArray(Pe,2),Oe=Ae[0],je=Ae[1],Ne=(0,r.useState)(!1),Re=_slicedToArray(Ne,2),Ge=Re[0],Ue=(Re[1],(0,r.useState)(!1)),Ee=_slicedToArray(Ue,2),Le=Ee[0],Je=Ee[1],Be=(0,r.useState)([]),Ye=_slicedToArray(Be,2),ze=Ye[0],We=Ye[1],qe=(0,r.useState)("0"),Ke=_slicedToArray(qe,2),Ve=Ke[0],Ze=Ke[1],He=(0,r.useState)(),Qe=_slicedToArray(He,2),Xe=Qe[0],en=Qe[1],nn=(0,r.useState)(),tn=_slicedToArray(nn,2),on=tn[0],an=tn[1],un=(0,r.useState)(h[0].url),rn=_slicedToArray(un,2),sn=rn[0],cn=rn[1],ln=(0,r.useState)(!1),dn=_slicedToArray(ln,2),fn=dn[0],yn=dn[1],mn=(0,r.useState)(!1),pn=_slicedToArray(mn,2),gn=pn[0],hn=pn[1],vn=(0,r.useState)(!1),_n=_slicedToArray(vn,2),Fn=_n[0],Sn=_n[1],kn=(0,r.useState)(!0),bn=_slicedToArray(kn,2),xn=bn[0],In=bn[1],Dn=(0,r.useState)(!1),Tn=_slicedToArray(Dn,2),Mn=Tn[0],wn=Tn[1],Cn=(0,r.useState)(!1),$n=_slicedToArray(Cn,2),Pn=$n[0],An=$n[1],On=(0,r.useState)(""),jn=_slicedToArray(On,2),Nn=jn[0],Rn=jn[1],Gn=(0,r.useState)(!1),Un=_slicedToArray(Gn,2),En=Un[0],Ln=Un[1],Jn=function getDates(){var e=(new Date).getDay(),n=new Date,t=new Array("星期日","星期一","星期二","星期三","星期四","星期五","星期六")[e],o=n.getFullYear()+"-"+Bn(n.getMonth()+1)+"-"+Bn(n.getDate()),a=n.getFullYear()+"-"+Bn(n.getMonth()+1);return en(o),oe(a),se(Bn(n.getMonth()+1)),de(o),pe(a),_e(t),a},Bn=function addZero(e){return parseInt(e)<10&&(e="0"+e),e};(0,r.onAppShow)((function(e){if(console.log(e,"返回内容"),1037===e.scene&&e.referrerInfo.extraData.userId&&e.referrerInfo.extraData.token&&e.referrerInfo.extraData.tokenTime&&e.referrerInfo.extraData.userUuid){var n={"userId":e.referrerInfo.extraData.userId,"token":e.referrerInfo.extraData.token,"tokenTime":e.referrerInfo.extraData.tokenTime};(0,i.appletJumpAction)(n).then((function(n){if(console.log(n,"请求返回数据"),200==n.code){if(n.data){var t={"sign":{}};(t=n.data).userId=e.referrerInfo.extraData.userId,t.token=e.referrerInfo.extraData.token,t.tokenTime=e.referrerInfo.extraData.tokenTime,t.uuid=e.referrerInfo.extraData.userUuid,t.sign={"token":e.referrerInfo.extraData.token,"time":e.referrerInfo.extraData.tokenTime},s.default.setStorageSync(l.MidData,t),zn()}}else if(40001==n.code);else if(4e4==n.code){console.log(n.data,"res.dafdsda"),s.default.setStorageSync(l.UserInfo,n.data);var o={"mid":n.data.id};(0,i.bkMemberAuthAction)(o).then((function(e){if(console.log(e),200!==e.code)(0,m.default)(e.msg);else{var n=s.default.getStorageSync(l.MidData);n.worker_id=e.data.worker_id,s.default.setStorageSync(l.MidData,n)}}))}else if(40003==n.code){console.log(n,"4000322");var a={};a.userId=e.referrerInfo.extraData.userId,a.token=e.referrerInfo.extraData.token,a.uuid=e.referrerInfo.extraData.userUuid,a.tokenTime=e.referrerInfo.extraData.tokenTime,s.default.setStorageSync(l.UserInfo,a),console.log(s.default.getStorageSync(l.UserInfo),"u"),g=!0}}))}})),(0,r.useDidShow)((function(){var e=s.default.getStorageSync(l.MidData),n=s.default.getStorageSync(l.CreationTime);s.default.getStorageSync(l.NeverPrompt)&&Ln(!0),e&&(W(!1),g=!1);var t=(new Date).getTime()/1e3;console.log(t,n,"xxx"),n&&n+604800>t&&An(!0),G((0,p.setClickTIme)([])),G((0,y.setWorker)([]));var o=s.default.getStorageSync(l.Type);o&&Te(o);s.default.getStorageSync(l.UserInfo);G((0,d.setTypes)(o)),zn()}));var Yn=function bkGetProjectTeam(){(0,i.bkGetProjectTeamAction)({}).then((function(e){0===e.data.length&&hn(!0)}))},zn=function getData(e){var n=s.default.getStorageSync(l.MidData);if(console.log(n,"有美誉mid"),n){var t=s.default.getStorageSync(l.Type);if(!t)return void Je(!0);Te(t),0===t&&Je(!0)}var o=void 0;console.log(fn,"resdsada"),e?o=e:(console.log(1),console.log(312312312312),o=Jn()),console.log(o,"changeTimechangeTime");var a={"time":o,"identity":De};n&&(0,i.bkIndexAction)(a).then((function(e){if(console.log("发起首页请求"),200===e.code){an(e.data),Ze(e.data.count_is_new),0==parseInt(e.data.count_is_new)?wn(!0):wn(!1),de(e.data.earliest_month);var n=new Date,t=n.getFullYear()+"-"+Bn(n.getMonth()+1);pe(t),Array.isArray(e.data.business_list.data)?e.data.business_list.data?We(e.data.business_list.data):We([]):e.data.business_list.data.constructor===Object&&(e.data.business_list.data.data[0].arr?We(e.data.business_list.data.data[0].arr):We([])),console.log(3123123),Rn(e.data.lasted_business_identity);s.default.getStorageSync(l.Type)}else(0,m.default)(e.msg)}))},Wn=function handleChangeTime(e){s.default.getStorageSync(l.MidData)?(console.log(e,"xxx"),Z(e.detail.value),X(e.detail.value),yn(!0),zn(e.detail.value),console.log(e.detail.value.substring(e.detail.value.length-2),"e.detail.value.substring(e.detail.value.length - 2)"),se(e.detail.value.substring(e.detail.value.length-2))):W(!0)},qn=function handelTps(){var e={"identity":De};(0,i.bkUpdateBusinessNewAction)(e).then((function(e){200===e.code?((0,m.default)("您完成了[ "+e.data+" ]条记工信息的备份，数据安全不丢失~"),wn(!0)):(0,m.default)("放心使用，免费记工，数据永远不会丢失哟")}))},Kn=function handelChange(e,n){if(s.default.getStorageSync(l.MidData)){var t=2===e?"开始为自己记工吧":"开始为工人记工吧";Te(e),s.default.setStorageSync(l.Type,e),n||((0,m.default)(t),setTimeout((function(){zn()}),1e3))}else W(!0)},Vn=function getNextPageData(){Zn("/pages/flowingWater/index")},Zn=function userRouteJump(e){s.default.navigateTo({"url":e})},Hn=function handleType(e){var n=void 0;if(n=1===De?2:1,1===e){console.log(De,"typenjdskajdkjab");var t=1===n?"开始为自己记工吧":"开始为工人记工吧";2==n&&Yn(),(0,m.default)(t),console.log(n,"neverPromptneverPrompt"),Te(n),s.default.setStorageSync(l.Type,n)}else 2===e&&(s.default.setStorageSync(l.NeverPrompt,!0),Ln(!0));Zn("/pages/recorder/index?type="+n),je(!1)},Qn=function handleGoback(){s.default.navigateToMiniProgram({"appId":"wx456feacb0e86162f","path":"/pages/index/index","extraData":{"foo":"bar"},"envVersion":"trial","success":function success(e){}})},Xn=function hanleImage(e){var n=void 0;if(e!==h[h.length-1].url)for(var t=0;t<h.length;t++)e===h[t].url&&(n=h[t+1].url);else In(!0),zn();cn(n)},et=function handleClose(e){W(e)},nt=function handleCallback(){In(!1),W(!1)},tt=function handleChangeRole(e){Te(e),Je(!1),s.default.setStorageSync(l.Type,e),zn()},ot=function handleCreateProjectClose(){hn(!1)},at=function handleInput(e,n){var t=JSON.parse(JSON.stringify(L));t[e]=n.detail.value,J(t)},ut=function handleAddProject(){var e={"group_name":L.groupName,"team_name":L.teamName};(0,i.bkAddProjectTeamAction)(e).then((function(e){200===e.code?Sn(!1):(0,m.default)(e.msg)}))},rt=function handleBack(){Sn(!1),hn(!0)},st=function handleJump(e,n){if(console.log(r.login,"login"),g)Zn("/pages/login/index?type=1");else if(s.default.getStorageSync(l.MidData)){if(n){if(0!==parseInt(Nn)&&De!=parseInt(Nn)&&!En)return console.log(De,"type"),console.log(Nn,"lasted_business_identity"),void je(!0);Kn(De,!0)}Zn(e)}else W(!0)};console.log(r.login,"loginloginloginlogin"),this.anonymousFunc0=function(){Xn(sn)},this.anonymousFunc1=function(e){return Wn(e)},this.anonymousFunc2=function(){Kn(2)},this.anonymousFunc3=function(){Kn(1)},this.anonymousFunc4=qn,this.anonymousFunc5=function(){return st("/pages/flowingWater/index")},this.anonymousFunc6=function(){return st("/pages/flowingWater/index")},this.anonymousFunc7=function(){return st("/pages/attendanceSheet/index")},this.anonymousFunc8=function(){return st("/pages/recorder/index?type="+De+"&stateType=1",!0)},this.anonymousFunc9=function(){return st("/pages/recorder/index?type="+De+"&stateType=1",!0)},this.anonymousFunc10=function(){return st("/pages/recorder/index?type="+De)},this.anonymousFunc11=function(){return st("/pages/notepad/index")},this.anonymousFunc12=function(){Vn()},this.anonymousFunc14=function(){return Vn()},this.anonymousFunc16=function(){return Zn("/pages/feedback/index")},this.anonymousFunc17=Qn,this.anonymousFunc18=function(){return Hn(0)},this.anonymousFunc19=function(){return Hn(1)},this.anonymousFunc20=function(){return Hn(2)},this.anonymousFunc21=function(){return tt(1)},this.anonymousFunc22=function(){return tt(2)};var it=function anonymousState__temp5(){hn(!1),Sn(!0)},ct=function anonymousState__temp6(){return Sn(!1)},lt=1===De&&ze.length>0&&!Ge?ze.map((function(n,t){n={"$original":(0,r.internal_get_original)(n)};var o=1===De&&ze.length>0&&!Ge?t+t:null,a="bcjzz"+t;return e.anonymousFunc13Map[a]=Vn,{"$loopState__temp2":o,"_$indexKey":a,"$original":n.$original}})):[],dt=2===De&&ze.length>0&&!Ge?ze.map((function(n,t){n={"$original":(0,r.internal_get_original)(n)};var o=2===De&&ze.length>0&&!Ge?t+t:null,a="bdazz"+t;return e.anonymousFunc15Map[a]=Vn,{"$loopState__temp4":o,"_$indexKey2":a,"$original":n.$original}})):[];return on&&!Mn&&r.propsManager.set({"value":Ve,"maxValue":99,"className":"AtBadge"},u,a),r.propsManager.set({"isOpened":Oe,"closeOnClickOverlay":!1},S,F),r.propsManager.set({"isOpened":Le,"closeOnClickOverlay":!1},I,x),r.propsManager.set({"display":z,"handleClose":et,"callback":nt},w,M),r.propsManager.set({"display":gn,"handleClose":ot,"val":L&&L.groupName,"handleSubmit":it,"handleInput":at},A,P),r.propsManager.set({"display":Fn,"handleSubmit":ut,"handleInput":at,"teamName":L&&L.teamName,"handleBack":rt,"handleClose":ct},R,N),Object.assign(this.__state,{"anonymousState__temp5":it,"anonymousState__temp6":ct,"loopArray59":lt,"loopArray60":dt,"$compid__71":u,"$compid__72":S,"$compid__73":I,"$compid__74":w,"$compid__75":A,"$compid__76":R,"image":sn,"closeImage":xn,"IMGCDNURL":f.IMGCDNURL,"start":le,"end":me,"vals":V,"newMonth":te,"type":De,"prompt":Pn,"item":on,"show":Mn,"busy":Ge,"list":ze,"month":re,"newTime":Xe,"week":ve}),this.__state}},{"key":"anonymousFunc0","value":function anonymousFunc0(e){}},{"key":"anonymousFunc1","value":function anonymousFunc1(e){}},{"key":"anonymousFunc2","value":function anonymousFunc2(e){}},{"key":"anonymousFunc3","value":function anonymousFunc3(e){}},{"key":"anonymousFunc4","value":function anonymousFunc4(e){}},{"key":"anonymousFunc5","value":function anonymousFunc5(e){}},{"key":"anonymousFunc6","value":function anonymousFunc6(e){}},{"key":"anonymousFunc7","value":function anonymousFunc7(e){}},{"key":"anonymousFunc8","value":function anonymousFunc8(e){}},{"key":"anonymousFunc9","value":function anonymousFunc9(e){}},{"key":"anonymousFunc10","value":function anonymousFunc10(e){}},{"key":"anonymousFunc11","value":function anonymousFunc11(e){}},{"key":"anonymousFunc12","value":function anonymousFunc12(e){}},{"key":"anonymousFunc13","value":function anonymousFunc13(e){for(var n,t=arguments.length,o=Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];return this.anonymousFunc13Map[e]&&(n=this.anonymousFunc13Map)[e].apply(n,o)}},{"key":"anonymousFunc14","value":function anonymousFunc14(e){}},{"key":"anonymousFunc15","value":function anonymousFunc15(e){for(var n,t=arguments.length,o=Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];return this.anonymousFunc15Map[e]&&(n=this.anonymousFunc15Map)[e].apply(n,o)}},{"key":"anonymousFunc16","value":function anonymousFunc16(e){}},{"key":"anonymousFunc17","value":function anonymousFunc17(e){}},{"key":"anonymousFunc18","value":function anonymousFunc18(e){}},{"key":"anonymousFunc19","value":function anonymousFunc19(e){}},{"key":"anonymousFunc20","value":function anonymousFunc20(e){}},{"key":"anonymousFunc21","value":function anonymousFunc21(e){}},{"key":"anonymousFunc22","value":function anonymousFunc22(e){}}]),Index}(s.default.Component),o.$$events=["anonymousFunc0","anonymousFunc1","anonymousFunc2","anonymousFunc3","anonymousFunc4","anonymousFunc5","anonymousFunc6","anonymousFunc7","anonymousFunc8","anonymousFunc9","anonymousFunc10","anonymousFunc11","anonymousFunc12","anonymousFunc13","anonymousFunc14","anonymousFunc15","anonymousFunc16","anonymousFunc17","anonymousFunc18","anonymousFunc19","anonymousFunc20","anonymousFunc21","anonymousFunc22"],o.$$componentPath="pages/index/index",a);n.default=v,Component(t(0).default.createComponent(v,!0))},"185":function(e,n,t){"use strict";t.r(n);t(186);var o=t(63);for(var a in o)"default"!==a&&function(e){t.d(n,e,(function(){return o[e]}))}(a)},"186":function(e,n,t){"use strict";t(117)},"188":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{"value":!0}),n.setTypes=function setTypes(e){return{"type":o.SETTYPE,"data":e}},n.getType=function getType(){return{"type":o.GETTYPE}};var o=t(114)},"189":function(e,n,t){},"63":function(e,n,t){"use strict";t.r(n);var o=t(17),a=t.n(o);for(var u in o)"default"!==u&&function(e){t.d(n,e,(function(){return o[e]}))}(u);n.default=a.a}},[[185,0,1,2,3]]]);