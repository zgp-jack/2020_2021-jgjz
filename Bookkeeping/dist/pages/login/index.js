(wx.webpackJsonp=wx.webpackJsonp||[]).push([[42],{"134":function(e,t,n){e.exports=n.p+"pages/login/index.wxml"},"229":function(e,t,n){"use strict";n.r(t);n(230);var o=n(76);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a)},"230":function(e,t,n){"use strict";n(134)},"231":function(e,t,n){},"29":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0}),t.SendTypeNo=t.SendTypeHave=void 0;var o,a,_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],o=!0,a=!1,r=void 0;try{for(var i,u=e[Symbol.iterator]();!(o=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=n(0),u=_interopRequireDefault(i),s=n(2),c=n(131),l=n(4),d=_interopRequireDefault(n(3));function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(231);t.SendTypeHave="have";var f=t.SendTypeNo="no",p=(a=o=function(e){function Login(){var e,t,n;_classCallCheck(this,Login);for(var o=arguments.length,a=Array(o),r=0;r<o;r++)a[r]=arguments[r];return t=n=_possibleConstructorReturn(this,(e=Login.__proto__||Object.getPrototypeOf(Login)).call.apply(e,[this].concat(a))),n.$usedState=["$compid__43","$compid__44","liked","time"],n.customComponents=["AtInput"],_possibleConstructorReturn(n,t)}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Login,e),r(Login,[{"key":"_constructor","value":function _constructor(e){(function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,n)}if("value"in o)return o.value;var r=o.get;return void 0!==r?r.call(n):void 0})(Login.prototype.__proto__||Object.getPrototypeOf(Login.prototype),"_constructor",this).call(this,e),this.$$refs=new u.default.RefsArray}},{"key":"_createData","value":function _createData(){this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{};var e=this.$prefix,t=(0,i.genCompid)(e+"$compid__43"),n=_slicedToArray(t,2),o=n[0],a=n[1],r=(0,i.genCompid)(e+"$compid__44"),p=_slicedToArray(r,2),y=p[0],g=p[1],h=(0,i.useRouter)(),m=h.params,v=m.session_key,_=m.encryptedData,b=m.iv,S=m.type,k=(0,i.useState)(60),w=_slicedToArray(k,2),O=w[0],C=w[1],F=(0,i.useState)(!0),x=_slicedToArray(F,2),D=x[0],P=x[1],$=(0,i.useState)({"phone":"","code":""}),j=_slicedToArray($,2),I=j[0],A=j[1],L=function countDown(e){var t=void 0;1===(t=e||JSON.parse(JSON.stringify(O)))?(C(60),P(!0)):(60===t&&(console.log(1),M()),P(!1),C(t-1),setTimeout((function(){countDown(t-1)}),1e3))};console.log(O,"xxx");var T=function handleBtn(){D&&L(60)},M=function getVcode(){if(console.log(32131231),console.log(I.phone,"model.phone"),(0,c.isPhone)(I.phone)){var e={"tel":I.phone,"sendType":f};(0,s.bkGetCodeAction)(e).then((function(e){(0,d.default)(e.errmsg,2500)}))}else(0,d.default)("请先输入正确的手机号码")},R=function handleInput(e,t){console.log(t);var n=JSON.parse(JSON.stringify(I));n[e]=t,A(n)},N=function handleLogin(){if((0,c.isPhone)(I.phone))if(I.code)if(S){var e={"tel":I.phone,"code":I.code};console.log(e,"dsadasdas"),(0,s.jumpBindTelAction)(e).then((function(e){console.log(e);var t=u.default.getStorageSync(l.UserInfo);if(console.log(t,"dsadasdasdsada"),200===e.code){var n={"mid":t.userId};(0,s.GetUserInfoAction)(n).then((function(t){if(console.log(t,"dsadsa"),200===t.code){var n=u.default.getStorageSync(l.MidData);n.worker_id=e.data.worker_id,u.default.setStorageSync(l.MidData,n),u.default.navigateBack()}else(0,d.default)(e.msg)}))}else(0,d.default)(e.msg)}))}else{var t={"session_key":v,"encryptedData":_,"iv":b,"refId":0,"source":"","tel":I.phone,"code":I.code,"type":"phone"};(0,s.GetUserInfoAction)(t).then((function(e){if(200===e.code){var t={"userId":e.data.id,"token":e.data.sign.token,"tokenTime":e.data.sign.time,"uuid":e.data.uuid,"login":!0};e.data.yupao_id=e.data.id,u.default.setStorageSync(l.UserInfo,t),u.default.setStorageSync(l.MidData,e.data);var n={"mid":e.data.id};(0,s.bkMemberAuthAction)(n).then((function(e){if(console.log(321321),200!==e.code)(0,d.default)(e.msg);else{var t=u.default.getStorageSync(l.MidData);t.worker_id=e.data.worker_id,u.default.setStorageSync(l.MidData,t),u.default.navigateBack()}}))}else(0,d.default)(e.msg)}))}else(0,d.default)("请先输入手机验证码");else(0,d.default)("请先输入正确的手机号码")};return this.anonymousFunc0=function(e){return R("phone",e)},this.anonymousFunc1=function(e){return R("code",e)},this.anonymousFunc2=T,this.anonymousFunc3=N,i.propsManager.set({"name":"number","clear":!0,"type":"text","maxLength":11,"placeholder":"输入手机号","value":I.phone,"onChange":this.anonymousFunc0},a,o),i.propsManager.set({"className":"codeInput","name":"number","clear":!0,"border":!1,"type":"text","placeholder":"请输入验证码","value":I.code,"onChange":this.anonymousFunc1},g,y),Object.assign(this.__state,{"$compid__43":a,"$compid__44":g,"liked":D,"time":O}),this.__state}},{"key":"anonymousFunc0","value":function anonymousFunc0(e){}},{"key":"anonymousFunc1","value":function anonymousFunc1(e){}},{"key":"anonymousFunc2","value":function anonymousFunc2(e){}},{"key":"anonymousFunc3","value":function anonymousFunc3(e){}}]),Login}(u.default.Component),o.$$events=["anonymousFunc2","anonymousFunc3"],o.$$componentPath="pages/login/index",a);t.default=p,Component(n(0).default.createComponent(p,!0))},"76":function(e,t,n){"use strict";n.r(t);var o=n(29),a=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t.default=a.a}},[[229,0,1,2,3]]]);